<!doctype html>
<!--[if lt IE 7]><html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if (IE 7)&!(IEMobile)]><html class="no-js lt-ie9 lt-ie8" lang="en"><![endif]-->
<!--[if (IE 8)&!(IEMobile)]><html class="no-js lt-ie9" lang="en"><![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"><!--<![endif]-->
<head>
<meta charset="utf-8">
<title>ViperCard - Fundamentals</title>
<meta name="description" content="description">
<meta name="keywords" content="keywords">

<!-- Twitter Cards -->
<meta name="twitter:title" content="Projects">
<meta name="twitter:site" content="@vipercarddotnet">
<meta name="twitter:creator" content="@vipercarddotnet">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://www.vipercard.net/resources/intro/desc.png">

<!-- Open Graph -->
<meta property="og:locale" content="en_US">
<meta property="og:type" content="article">
<meta property="og:title" content="ViperCard">
<meta property="og:url" content="https://www.vipercard.net/">
<meta property="og:site_name" content="ViperCard">

<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<link rel="stylesheet" href="../../../resources/intro/script_reference/github-markdown.css">
<style>
	.markdown-body {
		box-sizing: border-box;
		min-width: 200px;
		max-width: 980px;
		margin: 0 auto;
		padding: 45px;
	}

	@media (max-width: 767px) {
		.markdown-body {
			padding: 15px;
		}
	}
</style>

<meta http-equiv="cleartype" content="on">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-115931349-1"></script>
<script>
	window.dataLayer = window.dataLayer || [];
	function gtag(){dataLayer.push(arguments);}
	gtag('js', new Date());
	gtag('config', 'UA-115931349-1');
</script>
</head>

<body id="page">

<article class="markdown-body">
	<h1>ViperCard Script Reference </h1>
    <p>To see how to use ViperCard, first <a href="../video.html">see the videos here</a>.</p>
    <p>
Fundamentals |
<a href="02_functions.html">Functions</a> |
<a href="03_events.html">Events</a> |
<a href="04_commands.html">Commands</a> |
<a href="05_properties.html">Properties</a></p>
</article>

 <article class="markdown-body entry-content" itemprop="text">
<h2><a id="user-content-fundamentals" class="anchor" aria-hidden="true" href="#fundamentals"></a>Fundamentals</h2>
<p>All objects, including all buttons, fields, and cards, have an associated set of code called a "script."</p>
<p>Here is an example script:</p>
<pre><code>on mouseUp
    answer "hello, world"
end mouseUp
</code></pre>
<p>If this script is placed in a button, and the Browse tool is chosen
(looks like a hand), the code will be run when the button is clicked.</p>
<p>A line of code beginning with -- is ignored.
This is often used to write explanatory comments.
It can also be used to temporarily "disable" some code.
You can press Cmd+Q in the script editor to quickly
comment-out or uncomment a line.</p>
<pre><code>on mouseUp
    -- this line is a comment
    answer "hello, world"
end mouseUp
</code></pre>
<p>Indentation is not mandatory, but it is recommended for clarity.
The code editor will automatically add indentation
whenever you press Enter.</p>
<p>Statements must appear on separate lines.</p>
<p>The language is not case sensitive. "on mouseup" and
"on mouseUp" are equivalent.</p>
<p>A long line of code can be continued with a backslash, e.g.</p>
<pre><code>answer ("here is how to continue" &amp; \
    "code across two lines")
</code></pre>
<p>A common data type is a string (a sequence of text).</p>
<pre><code>put "abc" into x
</code></pre>
<p>Double-quotes ("), not single-quotes ('), must be used.
A string with length 0, "", is perfectly valid and used often to
represent a missing value. You may see this referred to as
an 'empty string'. You can easily test for an empty string
with code like:</p>
<pre><code>if x is "" then
    answer "empty string"
end if
</code></pre>
<p>To include a double-quote character in a string, use the quote constant,</p>
<pre><code>answer (quote &amp; "a" &amp; quote) -- displays "a"
</code></pre>
<p>Valid numbers include 123, 123.456, and scientific notation like
1.23e6 which means 1.23 multiplied by (10 to the 6th power).
Numbers can be in the range [-1e18, 1e18], if a number is
taken outside this range a runtime error will be thrown.
Division by zero, logarithm of a negative, and so on will also
cause a runtime error.</p>
<p><code>sqrt(0.5)</code> is a function call meaning to take the square root
of 0.5. <code>sqrt</code> is a built-in function, but we can also write a
user-defined function. <code>sum(1, 2)</code> is a function call that
adds 1 and 2 and returns 3. A comma separates the
values sent. Function calls can be nested, for example,
<code>sum(1, sum(2, 3))</code>.</p>
<p>Buttons and fields are referred to as "objects".
Cards are also a type of object.
And, the entire project, referred to as a "stack", is an object.</p>
<p>A script can set properties of an object with syntax like:</p>
<pre><code>set the width of cd btn "myBtn" to 450
</code></pre>
<p>One can also refer to an object by id:</p>
<pre><code>set the width of cd btn id 1234 to 450
</code></pre>
<p>See the "set" command documentation for a list of properties
that can be set.</p>
<p>When you are in the Browse tool and you interact with the page
by clicking on buttons or pressing keystrokes, this causes
messages to be fired.</p>
<p>If you click a button, and if that button has a script that happens
to have a function called "on mouseUp" defined, then the code in
that function will be run.</p>
<h2><a id="user-content-expressions" class="anchor" aria-hidden="true" href="#expressions"></a>Expressions</h2>
<p>A set of computations such as <code>1+2+3+4</code> or
<code>sqrt(0.5) + sqrt(0.6)</code> is an expression. Expressions can contain
any level of nested sub-expressions, for example,</p>
<pre><code>sqrt(0.5)
sqrt(0.5 + sqrt(0.6))
sqrt(0.5 + sqrt(0.6 + sqrt(0.7)))
</code></pre>
<p>are all valid.</p>
<p>Parentheses are used to dictate the order of operations, since</p>
<pre><code>3*(4+5)
</code></pre>
<p>gives a different answer than</p>
<pre><code>(3*4)+5
</code></pre>
<p>Parentheses are also used for grouping an expression.
for example, we needed to get the (n + 1)th line of a
variable, we would type <code>answer (line (n + 1) of x)</code></p>
<p>Do not type something like</p>
<pre><code>answer (line n + 1 of x) -- this is hard to read.
</code></pre>
<p>this is unclear, and will often cause syntax errors.</p>
<p>In the expression <code>2+3</code>, the <code>+</code> is called an operator.</p>
<p>Here are the operators that can be used.</p>
<p><code>2 * 3</code> (multiplication)</p>
<p><code>2 / 3</code> (division)</p>
<p><code>2 ^ 3</code> (raise to the third power)</p>
<p><code>7 div 5</code> (truncated division)</p>
<p><code>7 mod 5</code> (modulo)</p>
<p><code>2 &gt; 3</code> (greater than)</p>
<p><code>2 &lt; 3</code> (less than)</p>
<p><code>2 &gt;= 3</code> (greater than or equal to)</p>
<p><code>2 &lt;= 3</code> (less than or equal to)</p>
<p><code>2 == 3</code> (equal to)</p>
<p><code>2 != 3</code> (not equal to)</p>
<p><code>"abc" is "def"</code> (equal to)</p>
<p><code>"abc" is not "def"</code> (not equal to)</p>
<p><code>2 + 3</code> (addition)</p>
<p><code>2 - 3</code> (subtraction)</p>
<p><code>&amp;</code> and <code>&amp;&amp;</code> combine two strings (concatenation).</p>
<pre><code>put "a" &amp; "b" into x
answer x -- displays "ab"
put "a" &amp;&amp; "b" into x
answer x -- displays "a b"
</code></pre>
<p><strong>Logical operators</strong></p>
<p>The constants 'true' and 'false' are used often.
Internally there is no distinct boolean type, but the strings
"true" and "false" are interpreted as true and false respectively.</p>
<p><code>true and false</code> (logical and)</p>
<p><code>true or false</code> (logical or)</p>
<p><code>not true</code> (logical not)</p>
<p>Logical operations are not guaranteed to be short-circuiting.
in other words,</p>
<pre><code>put (true or myfunction()) into x
</code></pre>
<p>still will call <code>myfunction</code>, when it hypothetically could have
been skipped.</p>
<h2><a id="user-content-variables" class="anchor" aria-hidden="true" href="#variables"></a>Variables</h2>
<p>To introduce a variable, use the "put" command to place contents
into it. Running <code>put 3 into x</code> is valid even if x has never been
used before.</p>
<p>If you try to read from a variable before it has been introduced,
a runtime error will occur.</p>
<p>Variable names and function names are case insensitive.</p>
<p>Variable names cannot begin with a numeral, and can contain
underscores but no other punctuation. Certain words cannot be
used as variable names because they are already keywords
or built-in functions. For example, you cannot have a variable
named "line" because this is a keyword. You cannot have a
variable named "result" because this is a built-in function.</p>
<p>Use "global" to declare a variable as a global.</p>
<ol>
<li>it can be accessed from any other script</li>
<li>its contents are saved even after the function is complete.</li>
</ol>
<p>For example,</p>
<pre><code>global coordX, coordY
put 1 into coordX
put 2 into coordY
</code></pre>
<p>A runtime error can be thrown if a variable has the wrong
type, e.g.</p>
<pre><code>put "abc" into x
put 4 into y
put x + y into z
</code></pre>
<p>The addition operator requires numbers, and so creates a
runtime error when getting the string <code>"abc"</code>.</p>
<p>The functions</p>
<pre><code>strToNumber
</code></pre>
<p>and</p>
<pre><code>numberToStr
</code></pre>
<p>can be used to move back and forth.</p>
<p>Logical types must be either true or false.</p>
<pre><code>put (true and false) into x -- valid
put (true and 1) into x -- runtime error, expected true or false
</code></pre>
<p>Numeric comparison understands equivalent representations,
for example:</p>
<pre><code>put (456 is "456.00") into x -- true
put (456 is "00456.00") into x -- true
</code></pre>
<p>A "point" data type is two numbers separated by a comma.
This can save typing.</p>
<pre><code>set the left of cd btn "myBtn" to 10
set the top of cd btn "myBtn" to 20
</code></pre>
<p>is equivalent to
<code>set the topleft of cd btn "myBtn" to "10, 20"</code></p>
<h2><a id="user-content-structure" class="anchor" aria-hidden="true" href="#structure"></a>Structure</h2>
<p><strong>Scripts</strong></p>
<p>A script contains zero or more functions.
No code or declarations can exist outside of a function.</p>
<p><strong>Functions</strong></p>
<p>Functions look like this
<code>on mouseup answer "hello world" end mouseup</code>
or this
<code>function myAddition p1, p2 return p1 + p2 end myAddition</code></p>
<p>Nested functions are not currently supported.</p>
<p><strong>Loops</strong></p>
<pre><code>repeat with x = 1 to 3
    ...other code here...
end repeat
</code></pre>
<p>Refer to <code>repeat</code> under "commands" for more information.</p>
<p><strong>If conditions</strong></p>
<pre><code>if x &gt; 1 then
    ...other code here...
else
    ...other code here...
end if
</code></pre>
<p>Refer to <code>if</code> under "commands" for more information.</p>
<p><strong>Statements</strong></p>
<p>Every statement has exactly one command.
For example,
<code>put sqrt(0.5) into x</code>
is a valid statement.
You cannot have a line that is just
<code>sqrt(0.5)</code>
with no command, this is a syntax error.</p>
<p>Statements occur on separate lines, there's no way to cram
more than one statement onto a line.</p>
<p><strong>Expressions</strong></p>
<p>A set of computations such as <code>1+2+3+4</code> or
<code>sqrt(0.5) + sqrt(0.6)</code> is an expression. Most places that
have a value can be given an expression, for example,
`go card 2
go card (x + 1)</p>
<p>put "abc" into cd fld "myFld"
put "abc" into cd fld (nameOfMyField &amp; "Fld")</p>
<p>put "a" into line 4 of myList
put "a" into line (x+1) of myList</p>
<p>set the left of cd btn "myBtn" to x
set the left of cd btn (nameOfBtn) to (45 + 50 * cos(theta))
`</p>
<h2><a id="user-content-listsarrays" class="anchor" aria-hidden="true" href="#listsarrays"></a>Lists/arrays</h2>
<p>Here's a common way to create a list:</p>
<pre><code>put "" into myList
repeat with x = 1 to 5
    put 0 into line x of myList
end repeat
</code></pre>
<p>How to append a number to the list:</p>
<pre><code>put newline &amp; 20 after myList
</code></pre>
<p>How to add 10 to each element of the list:</p>
<pre><code>repeat with x = 1 to the number of lines in myList
    put (line x of myList) + 10 into line x of myList
end repeat

</code></pre>
<p><code>myList</code> is a normal variable, it can be passed as an
argument and so on.</p>
<h2><a id="user-content-custom-funcs" class="anchor" aria-hidden="true" href="#custom-funcs"></a>Custom funcs</h2>
<p>Here is an example of how to define and call a custom function.</p>
<pre><code>function myAddition p1, p2
    return p1 + p2
end myAddition
on mouseUp
    put myAddition(1,2) into x
end mouseUp
</code></pre>
<p>A current limitation is that custom functions can only be called
from the "put" command or the "return" command.
For example, if there is a custom function myAddition,
<code>put myAddition(4,5) into x</code>
is supported,
<code>return myAddition(4,5)</code>
is supported,
but
<code>set the width of cd btn "btn1" to myAddition(4,5)</code>
is not yet supported.</p>
<p>Recursion is supported.</p>
<p>You can define variadic functions (that accept any number of
values), see the documentation for the paramCount() function.</p>
<p>No error is thrown if the incorrect number of arguments is given.
Missing arguments are given the empty string ("").</p>
<pre><code>myAddition(7, 8, 9) -- the extra argument 9 is ignored
myAddition(7, 8) -- p1 is assigned 7, p2 is assigned 8
myAddition(7) -- p1 is assigned 7, p2 is assigned ""
myAddition() -- p1 is assigned "", p2 is assigned ""
</code></pre>
<p>The message hierarchy:
Messages bubble upwards from an object, to the parent card,
to the stack, until they are handled.
If you click on a button:
A mouseUp message is created
Script of the button is examined.
If there is an 'on mouseUp' handler,
Run the code in the mouseUp handler.
If the handler completes, stop running code, we're done.
If the handler calls 'pass mouseUp', continue:
Script of the current card is examined.
If there is an 'on mouseUp' handler,
Run the code in the mouseUp handler.
If the handler completes, stop running code, we're done.
If the handler calls 'pass mouseUp', continue:
Script of the current stack is examined.
If there is an 'on mouseUp' handler,
Run the code in the mouseUp handler.</p>
<p>Similarly, if you are typing text in a field, and type the letter 'a':
A afterKeyUp message is created
Script of the current field is examined.
If there is an 'on afterKeyUp' handler,
Run the code in the afterKeyUp handler.
If the handler completes, stop running code, we're done.
If the handler calls 'pass afterKeyUp', continue:
Script of the current card is examined.
If there is an 'on afterKeyUp' handler,
Run the code in the afterKeyUp handler.
If the handler completes, stop running code, we're done.
If the handler calls 'pass afterKeyUp', continue:
Script of the current stack is examined.
If there is an 'on afterKeyUp' handler,
Run the code in the mouseUp handler.</p>
<p>See documentation of the 'pass' command for an example.</p>
<p>Calls to custom commands and procedures also bubble upwards
in the same way. A function in the stack's script can be called
from any handler on a card, field, or button. A function in the
card's script can be called from any handler in a field or button.
So, it is useful to put commonly used utility code in a stack
script so that it can be called from anywhere.</p>
<h2><a id="user-content-chunks" class="anchor" aria-hidden="true" href="#chunks"></a>Chunks</h2>
<p>We call a reference to a part of a container a "chunk". These
examples demonstrate what can be done with chunk expressions:</p>
<pre><code>answer (char 2 of "abcd") -- displays "b"
answer (char 2 to 3 of "abcd") -- displays "bc"
answer (item 2 of "a,b,c,d") -- displays "b"
answer (item 2 to 3 of "a,b,c,d") -- displays "b,c"
answer (word 2 of "a b c d") -- displays "b"
answer (word 2 to 3 of "a b c d") -- displays "b c"
put "a" &amp; newline &amp; "b" &amp; newline &amp; "c" &amp; newline into lines
answer (line 2 of lines) -- displays "b"
answer (line 2 to 3 of lines) -- displays "b" &amp; newline &amp; "c"

answer (first char of "abcd") -- displays "a"
answer (second char of "abcd") -- displays "b"
answer (any char of "abcd") -- displays a random choice
answer (middle char of "abcd") 
answer (last char of "abcd") 

put "x" into char 2 of "abcd"
put "x" into char 2 to 3 of "abcd"
put "x" into item 2 of "a,b,c,d"
put "x" into item 2 to 3 of "a,b,c,d"
put "x" into word 2 of "a b c d"
put "x" into word 2 to 3 of "a b c d"
</code></pre>
<p>chunks can be nested arbitrarily, as in</p>
<pre><code>(char 2 of (char 2 to 3 of "abcd"))
</code></pre>
<p>or</p>
<pre><code>(char (line 4 of myList) of "abcd")
</code></pre>
<p>the itemdelimeter is "," by default but can be changed.
this can be helpful for simple parsing.
<code>put "abc|def|ghi" into x set the itemdelimiter to "|" answer (item 2 of x) -- displays "def"</code></p>
<h2><a id="user-content-constants" class="anchor" aria-hidden="true" href="#constants"></a>Constants</h2>
<p>Use <code>newline</code> to refer to a new line character.
Let's say you wanted two lines of text in a field, you would use
the following:</p>
<pre><code>put "first line" &amp; newline &amp; "second line" into cd fld "myFld"
</code></pre>
<p>(You shouldn't have to be concerned with newline platform
differences: the constants return, cr, linefeed are present for
backwards compatibility, but they are are all mapped to \n ascii
10 internally. If you are running windows, when you copy text
we'll automatically convert to \r\n newlines so if you paste
into notepad, it looks right.)</p>
<p>The following constants are defined:
<code>pi newline tab empty quote one two three four five six seven eight nine ten colon comma true false up down space return cr formfeed linefeed</code></p>
<h2><a id="user-content-tips--shortcuts" class="anchor" aria-hidden="true" href="#tips--shortcuts"></a>Tips &amp; Shortcuts</h2>
<p>General tips</p>
<ul>
<li>Double-click the eraser tool to clear paint on the current card</li>
<li>Use the message box (from the Go menu, choose Message Box) to quickly try running code</li>
<li>If your script is caught in an infinite loop, click the Stop button (black rectangle) to stop the script</li>
</ul>
<p>Keyboard shortcuts when editing text,</p>
<ul>
<li>Cmd+C to copy</li>
<li>Cmd+X to cut</li>
<li>Cmd+V to paste</li>
<li>Cmd+A to select all</li>
<li>Cmd+Backspace to delete entire word</li>
<li>PageUp / PageDown to scroll one page</li>
<li>Shift+PageUp / Shift+PageDown to select one page</li>
<li>Home to move to start of line</li>
<li>Shift+Home to select to start of line</li>
<li>Cmd+Home to move to the start</li>
<li>Cmd+Shift+Home to select to the start</li>
<li>Left Arrow to move to the left</li>
<li>Shift+Left Arrow to select to the left</li>
<li>Cmd+Left Arrow to move left one word</li>
<li>Cmd+Shift+Left Arrow to select left one word</li>
<li>Cmd+Arrow Up to scroll up</li>
<li>Cmd+Arrow Down to scroll down</li>
<li>Cmd+D to duplicate the current line</li>
<li>Cmd+L to delete the current line</li>
<li>Cmd+Q to quickly comment-out or uncomment the current line</li>
<li>Cmd+Q when many lines are selected to comment-out all of them</li>
<li>Tab key, to automatically indent code</li>
</ul>
<p>Some of the main differences between ViperCard and HyperCard:</p>
<ul>
<li>ViperCard is open source software that can run in any modern web browser</li>
<li>you can export stacks as a modern json format</li>
<li>art-stamps feature for adding clip art</li>
<li>you can use scientific notation in numbers</li>
<li>new animation features like save-to-gif</li>
</ul>
<h2><a id="user-content-credits" class="anchor" aria-hidden="true" href="#credits"></a>Credits</h2>
<p>ViperCard
<a href="https://github.com/downpoured/vipercard">https://github.com/downpoured/vipercard</a>
Copyright (C) 2018 Ben Fisher</p>
<p>This program is free software: you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later version.</p>
<p>This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.</p>
<p>ViperCard uses the following libraries:</p>
<p>Chevrotain
<a href="https://github.com/SAP/chevrotain">https://github.com/SAP/chevrotain</a>
Apache License 2.0</p>
<p>FileSaver.js
<a href="https://github.com/eligrey/FileSaver.js">https://github.com/eligrey/FileSaver.js</a>
MIT License</p>
<p>Golly
<a href="https://github.com/dannygarcia/golly">https://github.com/dannygarcia/golly</a>
MIT License</p>
<p>JSGIF
<a href="https://github.com/antimatter15/jsgif">https://github.com/antimatter15/jsgif</a>
MIT License</p>
<p>js-lru
<a href="https://github.com/rsms/js-lru">https://github.com/rsms/js-lru</a>
MIT license</p>
<p>Clipboard.js
<a href="https://github.com/zenorocha/clipboard.js/">https://github.com/zenorocha/clipboard.js/</a>
MIT License</p>
<p>Bresenham easy.filter
<a href="http://members.chello.at/easyfilter/bresenham.html" rel="nofollow">http://members.chello.at/easyfilter/bresenham.html</a>
written permission of author</p>
<p>and a small excerpt from the SciTE code editor,
ported from C++ to TypeScript by Ben Fisher
SciTE
<a href="https://www.scintilla.org/SciTE.html" rel="nofollow">https://www.scintilla.org/SciTE.html</a>
<a href="https://www.scintilla.org/License.txt" rel="nofollow">https://www.scintilla.org/License.txt</a></p>
</article>

</body>
</html>

